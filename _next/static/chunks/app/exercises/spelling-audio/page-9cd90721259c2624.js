(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{5832:function(e,t,n){Promise.resolve().then(n.bind(n,5788))},5788:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(7437),s=n(2265);function a(e,t){return t<=0?0:(e%t+t)%t}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=[...e];for(let e=n.length-1;e>0;e-=1){let r=Math.floor(t()*(e+1));[n[e],n[r]]=[n[r],n[e]]}return n}async function o(e){if(!e)return!1;try{return e.currentTime=0,await e.play(),!0}catch(e){return console.warn("Audio playback failed",e),!1}}var i=n(1925),c=n.n(i);function u(e){let{onPlay:t,disabled:n=!1,busy:a=!1,available:l=!0}=e,o=(0,s.useMemo)(()=>l?"Wort anh\xf6ren":"Audio nicht verf\xfcgbar",[l]);return(0,r.jsxs)("button",{type:"button",className:c().audioButton,onClick:t,disabled:n||!l,"aria-label":o,"aria-live":"polite","aria-busy":a,title:o,children:[(0,r.jsx)("svg",{className:c().audioButtonIcon,"aria-hidden":"true",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M20.3 9.4 11 16H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5l9.3 6.6a2 2 0 0 0 3.2-1.6V11a2 2 0 0 0-3.2-1.6ZM18 16.8v14.4L12.8 28H8v-8h4.8ZM31.7 12.3a2 2 0 1 0-3.4 2c2 3.3 2 8.4 0 11.7a2 2 0 1 0 3.4 2c3-5 3-10.7 0-15.7Zm6.6-5.5a2 2 0 0 0-3.4 2c4.3 7.2 4.3 18 0 25.2a2 2 0 0 0 3.4 2c5-8.4 5-20.8 0-29.2Z"})}),(0,r.jsx)("span",{className:c().audioButtonLabel,children:l?"Anh\xf6ren":"Kein Audio"})]})}function d(e){let{value:t,targetLength:n,status:s,shouldShake:a,onAnimationEnd:l}=e,o=[c().inputField];return"success"===s&&o.push(c().inputFieldSuccess),"error"===s&&o.push(c().inputFieldError),a&&o.push(c().inputFieldShake),(0,r.jsxs)("div",{className:c().inputWrapper,children:[(0,r.jsx)("div",{role:"textbox","aria-readonly":"true","aria-live":"polite",className:o.join(" "),onAnimationEnd:l,children:t.join("")}),(0,r.jsxs)("span",{className:c().inputCounter,"aria-hidden":"true",children:[t.length," / ",n]})]})}function h(e){let{letters:t,disabled:n=!1,onSelect:s}=e;return(0,r.jsx)("div",{className:"".concat(c().letterGrid).concat(n?" ".concat(c().letterGridLocked):""),role:"group","aria-label":"Buchstaben ausw\xe4hlen",children:t.map((e,t)=>(0,r.jsx)("button",{type:"button",className:c().letterButton,onClick:()=>s(e),disabled:n,"aria-label":"Buchstabe ".concat(e),children:e},"".concat(e,"-").concat(t)))})}function p(){var e,t;let{loading:n,loadError:i,currentWord:p,currentIndex:_,totalWords:f,letterPool:m,userInput:g,status:b,feedback:y,isLocked:v,showNextPrompt:x,audioAvailable:k,shouldShake:S,selectLetter:w,removeLetter:j,clearInput:B,checkAnswer:N,goToNextWord:E,acknowledgeShake:C,markAudioUnavailable:L,resetAudioAvailability:A,isValidLetter:P}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initialWords:t,storageKey:n="nextmindlabs_spelling_progress_v1",shouldShuffle:r=!0}=e,[o,i]=(0,s.useState)(null!=t?t:[]),[c,u]=(0,s.useState)(()=>!(t&&t.length)),[d,h]=(0,s.useState)(null),[p,_]=(0,s.useState)(0),[f,m]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[y,v]=(0,s.useState)("idle"),[x,k]=(0,s.useState)({message:"",tone:"neutral"}),[S,w]=(0,s.useState)(!1),[j,B]=(0,s.useState)(!1),[N,E]=(0,s.useState)(!0),[C,L]=(0,s.useState)(!1),[A,P]=(0,s.useState)({}),[W,F]=(0,s.useState)(!1),D=o.length,T=(0,s.useMemo)(()=>D>0?o[a(p,D)]:void 0,[p,D,o]),G=(0,s.useMemo)(()=>{var e;return new Set((null!==(e=null==T?void 0:T.letters)&&void 0!==e?e:[]).map(e=>e.toLowerCase()))},[T]);(0,s.useEffect)(()=>{if(t&&t.length)return;let e=!0;return async function(){try{u(!0);let t=await fetch("/data/words.json",{cache:"force-cache"});if(!t.ok)throw Error("Failed to load words.json: ".concat(t.statusText));let n=await t.json();e&&(i(n),h(null))}catch(t){console.error(t),e&&h("Konnte die W\xf6rter nicht laden. Bitte Seite neu laden oder sp\xe4ter erneut versuchen.")}finally{e&&u(!1)}}(),()=>{e=!1}},[t]),(0,s.useEffect)(()=>{if(!D||W)return;let e=function(e,t){try{let t=window.localStorage.getItem(e);if(!t)return null;return JSON.parse(t)}catch(t){return console.warn("Could not parse localStorage value for ".concat(e),t),null}}(n,0);if(e){var t,r;_(a(null!==(t=e.index)&&void 0!==t?t:0,D)),P(null!==(r=e.mistakes)&&void 0!==r?r:{})}F(!0)},[W,n,D]),(0,s.useEffect)(()=>{W&&function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(t){console.warn("Could not persist localStorage value for ".concat(e),t)}}(n,{index:p,mistakes:A})},[p,A,W,n]),(0,s.useEffect)(()=>{if(!T){m([]),b([]),v("idle"),k({message:"",tone:"neutral"}),w(!1),B(!1),E(!0),L(!1);return}m(r?l(T.letters):[...T.letters]),b([]),v("idle"),k({message:"",tone:"neutral"}),w(!1),B(!1),E(!0),L(!1)},[T,r]);let M=(0,s.useCallback)(e=>{if(T&&!S){if(g.length>=T.word.length){v("error"),k({message:"Du hast bereits alle Buchstaben gew\xe4hlt.",tone:"error"}),L(!0);return}b(t=>[...t,e]),"error"===y&&"error"===x.tone&&k({message:"",tone:"neutral"}),v("idle")}},[T,x.tone,S,y,g.length]),I=(0,s.useCallback)(()=>{S||0===g.length||(b(e=>e.slice(0,e.length-1)),"success"!==y&&v("idle"))},[S,y,g.length]),Z=(0,s.useCallback)(()=>{S||0===g.length||(b([]),v("idle"),k({message:"",tone:"neutral"}))},[S,g.length]),H=(0,s.useCallback)(()=>{var e;if(!T||S)return;let t=g.join("");if(!t){v("error"),k({message:"Bitte beginne mit dem ersten Buchstaben.",tone:"error"}),L(!0);return}if(t.length!==T.word.length){let e=T.word.length-t.length,n=e>0?"Dir fehlen noch ".concat(e," Buchstabe").concat(1===e?"":"n","."):"Du hast zu viele Buchstaben gew\xe4hlt.";v("error"),k({message:n,tone:"error"}),L(!0);return}if(t===T.word){v("success"),k({message:"Sehr gut! Weiter so.",tone:"success"}),w(!0),B(!0);return}v("error");let n=null===(e=T.hints)||void 0===e?void 0:e.tip;k({message:n?"Schon nah dran! Hinweis: ".concat(n):"Versuch es noch einmal.",tone:"error"}),L(!0),P(e=>{var t;return{...e,[T.id]:(null!==(t=e[T.id])&&void 0!==t?t:0)+1}})},[T,S,g]),K=(0,s.useCallback)(()=>{D&&(B(!1),_(e=>a(e+1,D)))},[D]),R=(0,s.useCallback)(()=>{T&&m(r?l(T.letters):[...T.letters])},[T,r]),V=(0,s.useCallback)(()=>{L(!1)},[]);return{loading:c,loadError:d,totalWords:D,currentIndex:p,currentWord:T,letterPool:f,userInput:g,status:y,feedback:x,isLocked:S,showNextPrompt:j,audioAvailable:N,shouldShake:C,mistakes:A,selectLetter:M,removeLetter:I,clearInput:Z,checkAnswer:H,goToNextWord:K,refreshLetters:R,acknowledgeShake:V,markAudioUnavailable:(0,s.useCallback)(()=>{E(!1),k({message:"Audio nicht verf\xfcgbar – bitte Lehrkraft informieren.",tone:"error"})},[]),resetAudioAvailability:(0,s.useCallback)(()=>{E(!0)},[]),isValidLetter:(0,s.useCallback)(e=>!!e&&1===e.length&&G.has(e.toLowerCase()),[G])}}(),W=(0,s.useRef)(null),[F,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{W.current&&p&&(W.current.src=p.audioUrl,W.current.load(),D(!1),A())},[p,A]),(0,s.useEffect)(()=>{let e=W.current;if(e)return e.addEventListener("ended",t),e.addEventListener("pause",t),e.addEventListener("error",n),()=>{e.removeEventListener("ended",t),e.removeEventListener("pause",t),e.removeEventListener("error",n)};function t(){D(!1)}function n(){D(!1),L()}},[L]);let T=async()=>{W.current&&k&&(D(!0),await o(W.current)||(D(!1),L()))};(0,s.useEffect)(()=>{let e=e=>{if(p){if("Backspace"===e.key){e.preventDefault(),j();return}if("Enter"===e.key){e.preventDefault(),N();return}if("Escape"===e.key){e.preventDefault(),B();return}if(1===e.key.length&&P(e.key)){var t;e.preventDefault();let n=e.key.toLowerCase();w(null!==(t=m.find(e=>e.toLowerCase()===n))&&void 0!==t?t:e.key)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[N,B,p,P,m,j,w]);let G=(0,s.useMemo)(()=>f?"Wort ".concat(_+1," von ").concat(f):"W\xf6rter werden geladen …",[_,f]);return n?(0,r.jsx)("section",{className:c().page,children:(0,r.jsx)("p",{className:c().statusInfo,"aria-live":"polite",children:"W\xf6rter werden geladen …"})}):i?(0,r.jsx)("section",{className:c().page,children:(0,r.jsx)("p",{className:c().statusError,role:"alert",children:i})}):p?(0,r.jsxs)("section",{className:c().page,"aria-labelledby":"spellingAudioHeading",children:[(0,r.jsxs)("header",{className:c().header,children:[(0,r.jsxs)("div",{className:c().headerText,children:[(0,r.jsx)("p",{className:c().progress,"aria-live":"polite",children:G}),(0,r.jsx)("h2",{id:"spellingAudioHeading",className:c().heading,children:"H\xf6re das Wort – baue es mit Buchstaben nach"})]}),(0,r.jsx)(u,{onPlay:T,disabled:F,busy:F,available:k})]}),(0,r.jsxs)("section",{className:c().wordSection,"aria-labelledby":"wordPrompt",children:[(0,r.jsx)("p",{id:"wordPrompt",className:c().prompt,children:"Baue das Wort:"}),(0,r.jsx)(d,{value:g,targetLength:p.word.length,status:b,shouldShake:S,onAnimationEnd:C}),(null===(e=p.hints)||void 0===e?void 0:e.tip)?(0,r.jsxs)("p",{className:c().hint,"aria-live":"polite",children:["Tipp: ",p.hints.tip]}):(0,r.jsx)("span",{"aria-hidden":"true",className:c().hintPlaceholder,children:"\xa0"})]}),(0,r.jsx)(h,{letters:m,disabled:v,onSelect:w}),(0,r.jsxs)("div",{className:c().controls,role:"group","aria-label":"Aktionen",children:[(0,r.jsx)("button",{type:"button",className:c().controlButtonSecondary,onClick:j,disabled:v||0===g.length,"aria-label":"Letzten Buchstaben l\xf6schen",children:"⌫ R\xfcckg\xe4ngig"}),(0,r.jsx)("button",{type:"button",className:c().controlButtonPrimary,onClick:N,disabled:v,children:"Antwort pr\xfcfen"}),(0,r.jsx)("button",{type:"button",className:c().controlButtonSecondary,onClick:B,disabled:v||0===g.length,"aria-label":"Eingabe zur\xfccksetzen",children:"↺ L\xf6schen"})]}),(0,r.jsx)("div",{className:"".concat(c().feedback," ").concat((t=y.tone,"success"===b||"success"===t?c().feedbackSuccess:"error"===b||"error"===t?c().feedbackError:"")),"aria-live":"polite",children:y.message||"\xa0"}),x?(0,r.jsxs)("div",{className:c().nextPrompt,role:"status","aria-live":"polite",children:[(0,r.jsx)("p",{className:c().nextPromptText,children:"Super! Bereit f\xfcr das n\xe4chste Wort?"}),(0,r.jsx)("button",{type:"button",className:c().nextButton,onClick:E,children:"Weiter zum n\xe4chsten Wort"})]}):null,(0,r.jsx)("audio",{ref:W,preload:"auto","aria-hidden":"true"})]}):(0,r.jsx)("section",{className:c().page,children:(0,r.jsxs)("p",{className:c().statusError,role:"alert",children:["Keine W\xf6rter gefunden. Bitte \xfcberpr\xfcfe die Datei ",(0,r.jsx)("code",{children:"/public/data/words.json"}),"."]})})}},1925:function(e){e.exports={page:"styles_page__s5jYG",statusInfo:"styles_statusInfo__yKLWP",statusError:"styles_statusError__Cr0go",header:"styles_header__gSjiC",headerText:"styles_headerText__ODeMx",progress:"styles_progress__cLRgr",heading:"styles_heading__NO8T3",audioButton:"styles_audioButton__Sn78Z",audioButtonIcon:"styles_audioButtonIcon__gQmJ1",audioButtonLabel:"styles_audioButtonLabel__iCGK7",wordSection:"styles_wordSection__yZHkl",prompt:"styles_prompt__bijRY",inputWrapper:"styles_inputWrapper__SnjCa",inputField:"styles_inputField__CX7KI",inputFieldSuccess:"styles_inputFieldSuccess__y93cG",inputFieldError:"styles_inputFieldError__cfFqg",inputFieldShake:"styles_inputFieldShake__FgmVw",inputShake:"styles_inputShake__7n_rA",inputCounter:"styles_inputCounter__FXf18",hint:"styles_hint__5ZasV",hintPlaceholder:"styles_hintPlaceholder__pBffR",letterGrid:"styles_letterGrid__HKoVL",letterGridLocked:"styles_letterGridLocked__ZLGiW",letterButton:"styles_letterButton___jsqx",controls:"styles_controls__8Alxk",controlButtonPrimary:"styles_controlButtonPrimary__R9Dk0",controlButtonSecondary:"styles_controlButtonSecondary__QvRC_",feedback:"styles_feedback__TvmBc",feedbackSuccess:"styles_feedbackSuccess__QZDSA",feedbackError:"styles_feedbackError__CSyLk",nextPrompt:"styles_nextPrompt__SE2L9",nextPromptText:"styles_nextPromptText__NUVtx",nextButton:"styles_nextButton__9JaBc"}}},function(e){e.O(0,[50,971,23,744],function(){return e(e.s=5832)}),_N_E=e.O()}]);