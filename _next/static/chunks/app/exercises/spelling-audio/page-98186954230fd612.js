(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{5832:function(e,t,n){Promise.resolve().then(n.bind(n,5788))},5788:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(7437),s=n(2265);let a="/NextMindLabsWeb",l=a?"/".concat(a.replace(/^\/|\/$/g,"")):"";function o(e){return l&&e.startsWith("/")?"".concat(l).concat(e):e}function i(e,t){return t<=0?0:(e%t+t)%t}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,n=[...e];for(let e=n.length-1;e>0;e-=1){let r=Math.floor(t()*(e+1));[n[e],n[r]]=[n[r],n[e]]}return n}async function u(e){if(!e)return!1;try{return e.currentTime=0,await e.play(),!0}catch(e){return console.warn("Audio playback failed",e),!1}}var d=n(1925),h=n.n(d);function p(e){let{onPlay:t,disabled:n=!1,busy:a=!1,available:l=!0}=e,o=(0,s.useMemo)(()=>l?"Wort anh\xf6ren":"Audio nicht verf\xfcgbar",[l]);return(0,r.jsxs)("button",{type:"button",className:h().audioButton,onClick:t,disabled:n||!l,"aria-label":o,"aria-live":"polite","aria-busy":a,title:o,children:[(0,r.jsx)("svg",{className:h().audioButtonIcon,"aria-hidden":"true",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M20.3 9.4 11 16H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5l9.3 6.6a2 2 0 0 0 3.2-1.6V11a2 2 0 0 0-3.2-1.6ZM18 16.8v14.4L12.8 28H8v-8h4.8ZM31.7 12.3a2 2 0 1 0-3.4 2c2 3.3 2 8.4 0 11.7a2 2 0 1 0 3.4 2c3-5 3-10.7 0-15.7Zm6.6-5.5a2 2 0 0 0-3.4 2c4.3 7.2 4.3 18 0 25.2a2 2 0 0 0 3.4 2c5-8.4 5-20.8 0-29.2Z"})}),(0,r.jsx)("span",{className:h().audioButtonLabel,children:l?"Anh\xf6ren":"Kein Audio"})]})}function _(e){let{value:t,targetLength:n,status:s,shouldShake:a,onAnimationEnd:l}=e,o=[h().inputField];return"success"===s&&o.push(h().inputFieldSuccess),"error"===s&&o.push(h().inputFieldError),a&&o.push(h().inputFieldShake),(0,r.jsxs)("div",{className:h().inputWrapper,children:[(0,r.jsx)("div",{role:"textbox","aria-readonly":"true","aria-live":"polite",className:o.join(" "),onAnimationEnd:l,children:t.join("")}),(0,r.jsxs)("span",{className:h().inputCounter,"aria-hidden":"true",children:[t.length," / ",n]})]})}function f(e){let{letters:t,disabled:n=!1,onSelect:s}=e;return(0,r.jsx)("div",{className:"".concat(h().letterGrid).concat(n?" ".concat(h().letterGridLocked):""),role:"group","aria-label":"Buchstaben ausw\xe4hlen",children:t.map((e,t)=>(0,r.jsx)("button",{type:"button",className:h().letterButton,onClick:()=>s(e),disabled:n,"aria-label":"Buchstabe ".concat(e),children:e},"".concat(e,"-").concat(t)))})}function m(e){return{...e,audioUrl:o(e.audioUrl)}}function g(){var e,t;let{loading:n,loadError:a,currentWord:l,currentIndex:d,totalWords:g,letterPool:b,userInput:y,status:v,feedback:x,isLocked:k,showNextPrompt:S,audioAvailable:w,shouldShake:j,selectLetter:B,removeLetter:N,clearInput:E,checkAnswer:C,goToNextWord:L,acknowledgeShake:W,markAudioUnavailable:A,resetAudioAvailability:P,isValidLetter:F}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initialWords:t,storageKey:n="nextmindlabs_spelling_progress_v1",shouldShuffle:r=!0}=e,[a,l]=(0,s.useState)(()=>(null!=t?t:[]).map(m)),[u,d]=(0,s.useState)(()=>!(t&&t.length)),[h,p]=(0,s.useState)(null),[_,f]=(0,s.useState)(0),[g,b]=(0,s.useState)([]),[y,v]=(0,s.useState)([]),[x,k]=(0,s.useState)("idle"),[S,w]=(0,s.useState)({message:"",tone:"neutral"}),[j,B]=(0,s.useState)(!1),[N,E]=(0,s.useState)(!1),[C,L]=(0,s.useState)(!0),[W,A]=(0,s.useState)(!1),[P,F]=(0,s.useState)({}),[D,M]=(0,s.useState)(!1),T=a.length,G=(0,s.useMemo)(()=>T>0?a[i(_,T)]:void 0,[_,T,a]),I=(0,s.useMemo)(()=>{var e;return new Set((null!==(e=null==G?void 0:G.letters)&&void 0!==e?e:[]).map(e=>e.toLowerCase()))},[G]);(0,s.useEffect)(()=>{if(t&&t.length)return;let e=!0;return async function(){try{d(!0);let t=await fetch(o("/data/words.json"),{cache:"force-cache"});if(!t.ok)throw Error("Failed to load words.json: ".concat(t.statusText));let n=await t.json();e&&(l(n.map(m)),p(null))}catch(t){console.error(t),e&&p("Konnte die W\xf6rter nicht laden. Bitte Seite neu laden oder sp\xe4ter erneut versuchen.")}finally{e&&d(!1)}}(),()=>{e=!1}},[t]),(0,s.useEffect)(()=>{if(!T||D)return;let e=function(e,t){try{let t=window.localStorage.getItem(e);if(!t)return null;return JSON.parse(t)}catch(t){return console.warn("Could not parse localStorage value for ".concat(e),t),null}}(n,0);if(e){var t,r;f(i(null!==(t=e.index)&&void 0!==t?t:0,T)),F(null!==(r=e.mistakes)&&void 0!==r?r:{})}M(!0)},[D,n,T]),(0,s.useEffect)(()=>{D&&function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(t){console.warn("Could not persist localStorage value for ".concat(e),t)}}(n,{index:_,mistakes:P})},[_,P,D,n]),(0,s.useEffect)(()=>{if(!G){b([]),v([]),k("idle"),w({message:"",tone:"neutral"}),B(!1),E(!1),L(!0),A(!1);return}b(r?c(G.letters):[...G.letters]),v([]),k("idle"),w({message:"",tone:"neutral"}),B(!1),E(!1),L(!0),A(!1)},[G,r]);let Z=(0,s.useCallback)(e=>{if(G&&!j){if(y.length>=G.word.length){k("error"),w({message:"Du hast bereits alle Buchstaben gew\xe4hlt.",tone:"error"}),A(!0);return}v(t=>[...t,e]),"error"===x&&"error"===S.tone&&w({message:"",tone:"neutral"}),k("idle")}},[G,S.tone,j,x,y.length]),H=(0,s.useCallback)(()=>{j||0===y.length||(v(e=>e.slice(0,e.length-1)),"success"!==x&&k("idle"))},[j,x,y.length]),K=(0,s.useCallback)(()=>{j||0===y.length||(v([]),k("idle"),w({message:"",tone:"neutral"}))},[j,y.length]),R=(0,s.useCallback)(()=>{var e;if(!G||j)return;let t=y.join("");if(!t){k("error"),w({message:"Bitte beginne mit dem ersten Buchstaben.",tone:"error"}),A(!0);return}if(t.length!==G.word.length){let e=G.word.length-t.length,n=e>0?"Dir fehlen noch ".concat(e," Buchstabe").concat(1===e?"":"n","."):"Du hast zu viele Buchstaben gew\xe4hlt.";k("error"),w({message:n,tone:"error"}),A(!0);return}if(t===G.word){k("success"),w({message:"Sehr gut! Weiter so.",tone:"success"}),B(!0),E(!0);return}k("error");let n=null===(e=G.hints)||void 0===e?void 0:e.tip;w({message:n?"Schon nah dran! Hinweis: ".concat(n):"Versuch es noch einmal.",tone:"error"}),A(!0),F(e=>{var t;return{...e,[G.id]:(null!==(t=e[G.id])&&void 0!==t?t:0)+1}})},[G,j,y]),V=(0,s.useCallback)(()=>{T&&(E(!1),f(e=>i(e+1,T)))},[T]),O=(0,s.useCallback)(()=>{G&&b(r?c(G.letters):[...G.letters])},[G,r]),z=(0,s.useCallback)(()=>{A(!1)},[]);return{loading:u,loadError:h,totalWords:T,currentIndex:_,currentWord:G,letterPool:g,userInput:y,status:x,feedback:S,isLocked:j,showNextPrompt:N,audioAvailable:C,shouldShake:W,mistakes:P,selectLetter:Z,removeLetter:H,clearInput:K,checkAnswer:R,goToNextWord:V,refreshLetters:O,acknowledgeShake:z,markAudioUnavailable:(0,s.useCallback)(()=>{L(!1),w({message:"Audio nicht verf\xfcgbar – bitte Lehrkraft informieren.",tone:"error"})},[]),resetAudioAvailability:(0,s.useCallback)(()=>{L(!0)},[]),isValidLetter:(0,s.useCallback)(e=>!!e&&1===e.length&&I.has(e.toLowerCase()),[I])}}(),D=(0,s.useRef)(null),[M,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{D.current&&l&&(D.current.src=l.audioUrl,D.current.load(),T(!1),P())},[l,P]),(0,s.useEffect)(()=>{let e=D.current;if(e)return e.addEventListener("ended",t),e.addEventListener("pause",t),e.addEventListener("error",n),()=>{e.removeEventListener("ended",t),e.removeEventListener("pause",t),e.removeEventListener("error",n)};function t(){T(!1)}function n(){T(!1),A()}},[A]);let G=async()=>{D.current&&w&&(T(!0),await u(D.current)||(T(!1),A()))};(0,s.useEffect)(()=>{let e=e=>{if(l){if("Backspace"===e.key){e.preventDefault(),N();return}if("Enter"===e.key){e.preventDefault(),C();return}if("Escape"===e.key){e.preventDefault(),E();return}if(1===e.key.length&&F(e.key)){var t;e.preventDefault();let n=e.key.toLowerCase();B(null!==(t=b.find(e=>e.toLowerCase()===n))&&void 0!==t?t:e.key)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[C,E,l,F,b,N,B]);let I=(0,s.useMemo)(()=>g?"Wort ".concat(d+1," von ").concat(g):"W\xf6rter werden geladen …",[d,g]);return n?(0,r.jsx)("section",{className:h().page,children:(0,r.jsx)("p",{className:h().statusInfo,"aria-live":"polite",children:"W\xf6rter werden geladen …"})}):a?(0,r.jsx)("section",{className:h().page,children:(0,r.jsx)("p",{className:h().statusError,role:"alert",children:a})}):l?(0,r.jsxs)("section",{className:h().page,"aria-labelledby":"spellingAudioHeading",children:[(0,r.jsxs)("header",{className:h().header,children:[(0,r.jsxs)("div",{className:h().headerText,children:[(0,r.jsx)("p",{className:h().progress,"aria-live":"polite",children:I}),(0,r.jsx)("h2",{id:"spellingAudioHeading",className:h().heading,children:"H\xf6re das Wort – baue es mit Buchstaben nach"})]}),(0,r.jsx)(p,{onPlay:G,disabled:M,busy:M,available:w})]}),(0,r.jsxs)("section",{className:h().wordSection,"aria-labelledby":"wordPrompt",children:[(0,r.jsx)("p",{id:"wordPrompt",className:h().prompt,children:"Baue das Wort:"}),(0,r.jsx)(_,{value:y,targetLength:l.word.length,status:v,shouldShake:j,onAnimationEnd:W}),(null===(e=l.hints)||void 0===e?void 0:e.tip)?(0,r.jsxs)("p",{className:h().hint,"aria-live":"polite",children:["Tipp: ",l.hints.tip]}):(0,r.jsx)("span",{"aria-hidden":"true",className:h().hintPlaceholder,children:"\xa0"})]}),(0,r.jsx)(f,{letters:b,disabled:k,onSelect:B}),(0,r.jsxs)("div",{className:h().controls,role:"group","aria-label":"Aktionen",children:[(0,r.jsx)("button",{type:"button",className:h().controlButtonSecondary,onClick:N,disabled:k||0===y.length,"aria-label":"Letzten Buchstaben l\xf6schen",children:"⌫ R\xfcckg\xe4ngig"}),(0,r.jsx)("button",{type:"button",className:h().controlButtonPrimary,onClick:C,disabled:k,children:"Antwort pr\xfcfen"}),(0,r.jsx)("button",{type:"button",className:h().controlButtonSecondary,onClick:E,disabled:k||0===y.length,"aria-label":"Eingabe zur\xfccksetzen",children:"↺ L\xf6schen"})]}),(0,r.jsx)("div",{className:"".concat(h().feedback," ").concat((t=x.tone,"success"===v||"success"===t?h().feedbackSuccess:"error"===v||"error"===t?h().feedbackError:"")),"aria-live":"polite",children:x.message||"\xa0"}),S?(0,r.jsxs)("div",{className:h().nextPrompt,role:"status","aria-live":"polite",children:[(0,r.jsx)("p",{className:h().nextPromptText,children:"Super! Bereit f\xfcr das n\xe4chste Wort?"}),(0,r.jsx)("button",{type:"button",className:h().nextButton,onClick:L,children:"Weiter zum n\xe4chsten Wort"})]}):null,(0,r.jsx)("audio",{ref:D,preload:"auto","aria-hidden":"true"})]}):(0,r.jsx)("section",{className:h().page,children:(0,r.jsxs)("p",{className:h().statusError,role:"alert",children:["Keine W\xf6rter gefunden. Bitte \xfcberpr\xfcfe die Datei ",(0,r.jsx)("code",{children:"/public/data/words.json"}),"."]})})}},1925:function(e){e.exports={page:"styles_page__s5jYG",statusInfo:"styles_statusInfo__yKLWP",statusError:"styles_statusError__Cr0go",header:"styles_header__gSjiC",headerText:"styles_headerText__ODeMx",progress:"styles_progress__cLRgr",heading:"styles_heading__NO8T3",audioButton:"styles_audioButton__Sn78Z",audioButtonIcon:"styles_audioButtonIcon__gQmJ1",audioButtonLabel:"styles_audioButtonLabel__iCGK7",wordSection:"styles_wordSection__yZHkl",prompt:"styles_prompt__bijRY",inputWrapper:"styles_inputWrapper__SnjCa",inputField:"styles_inputField__CX7KI",inputFieldSuccess:"styles_inputFieldSuccess__y93cG",inputFieldError:"styles_inputFieldError__cfFqg",inputFieldShake:"styles_inputFieldShake__FgmVw",inputShake:"styles_inputShake__7n_rA",inputCounter:"styles_inputCounter__FXf18",hint:"styles_hint__5ZasV",hintPlaceholder:"styles_hintPlaceholder__pBffR",letterGrid:"styles_letterGrid__HKoVL",letterGridLocked:"styles_letterGridLocked__ZLGiW",letterButton:"styles_letterButton___jsqx",controls:"styles_controls__8Alxk",controlButtonPrimary:"styles_controlButtonPrimary__R9Dk0",controlButtonSecondary:"styles_controlButtonSecondary__QvRC_",feedback:"styles_feedback__TvmBc",feedbackSuccess:"styles_feedbackSuccess__QZDSA",feedbackError:"styles_feedbackError__CSyLk",nextPrompt:"styles_nextPrompt__SE2L9",nextPromptText:"styles_nextPromptText__NUVtx",nextButton:"styles_nextButton__9JaBc"}}},function(e){e.O(0,[50,971,23,744],function(){return e(e.s=5832)}),_N_E=e.O()}]);